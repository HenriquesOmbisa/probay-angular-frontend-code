<!-- Botão do carrinho (para usar na navbar) -->
<button (click)="toggleCart()" class="relative z-20 flex items-center gap-1 hover:text-blue-600 transition">
  <lucide-angular [img]="icons.ShoppingBag" class="w-6 h-6"></lucide-angular>

  @if (cartItems.length > 0) {
    <span
      class="absolute -top-2 -right-2 bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
      {{ cartItems.length }}
    </span>
  }
</button>

<!-- Overlay -->
 @if (isOpen) {
  <div
    class="fixed h-screen inset-0 bg-black/50 transition-opacity duration-300 z-40"
    (click)="closeCart()"
  ></div>
}

<!-- Sidebar (drawer) -->
<div
  [class]="'top-0 w-80 h-screen bg-white shadow-xl z-50 transform transition-transform duration-300 ease-in-out flex flex-col ' + (isOpen ? 'fixed right-0 translate-x-0' : 'hidden -right-80 translate-x-full')"
>
  <!-- Cabeçalho -->
  <div class="flex items-center justify-between p-4 border-b">
    <h2 class="text-lg font-semibold">Seu Carrinho</h2>
    <button (click)="closeCart()">
      <lucide-angular [img]="icons.X" class="w-5 h-5"></lucide-angular>
    </button>
  </div>

  <!-- Itens -->
  <div class="flex-1 overflow-y-auto p-4">
    @if (cartItems.length === 0) {
      <div class="text-center text-gray-500 mt-10">
        Carrinho vazio
      </div>
    }

    @for (item of cartItems; track $index) {
      <div class="flex justify-between mb-3">
      <span>{{ item.name }}</span>
      <span class="font-medium">{{ item.price | currency:'USD' }}</span>
    </div>
    }
  </div>

  <!-- Total -->
  <div class="border-t p-4 flex items-center justify-between">
    <span class="font-semibold">Total:</span>
    <span class="font-semibold">{{ total | currency:'USD' }}</span>
  </div>

  <!-- Botão -->
  <div class="p-4">
    <button
      class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition">
      Finalizar Compra
    </button>
  </div>
</div>
